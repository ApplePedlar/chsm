(function(t){function e(e){for(var i,c,u=e[0],s=e[1],o=e[2],h=0,f=[];h<u.length;h++)c=u[h],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&f.push(n[c][0]),n[c]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);p&&p(e);while(f.length)f.shift()();return a.push.apply(a,o||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,u=1;u<r.length;u++){var s=r[u];0!==n[s]&&(i=!1)}i&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var i={},n={app:0},a=[];function c(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=i,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(r,i,function(e){return t[e]}.bind(null,i));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],s=u.push.bind(u);u.push=e,u=u.slice();for(var o=0;o<u.length;o++)e(u[o]);var p=s;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"3d72":function(t,e,r){"use strict";r("5fb7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("CHSM - Chromatic Harmonica Score Maker")]),r("div",{staticClass:"form"},[t._v("Input ABC Score."),r("br"),r("textarea",{ref:"abcInput"},[t._v(t._s(t.defaultAbcText))]),r("br"),t._v("Offset pitch:"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.offsetPitch,expression:"offsetPitch"}],domProps:{value:t.offsetPitch},on:{input:function(e){e.target.composing||(t.offsetPitch=e.target.value)}}}),t._v("e.g. -12 means one octave down."),r("br"),r("button",{on:{click:t.transformAbc}},[t._v("reRender")]),r("button",{attrs:{onclick:"window.print()"}},[t._v("print")])]),r("div",{ref:"abcObj",attrs:{id:"abc"}})])},a=[],c=(r("c5f6"),r("ee1c")),u=r.n(c),s=(r("ac6a"),r("d225")),o=r("b0b4"),p=function(){function t(){Object(s["a"])(this,t),this.init()}return Object(o["a"])(t,[{key:"init",value:function(){this.pitchNumberMap={},this.pitchNumberMap[-7]=["１"],this.pitchNumberMap[-6.5]=["ａ"],this.pitchNumberMap[-6]=["①"],this.pitchNumberMap[-5.5]=["Ａ"],this.pitchNumberMap[-5]=["２"],this.pitchNumberMap[-4]=["②","ｂ"],this.pitchNumberMap[-3.5]=["Ｂ"],this.pitchNumberMap[-3]=["３"],this.pitchNumberMap[-2.5]=["ｃ"],this.pitchNumberMap[-2]=["③"],this.pitchNumberMap[-1.5]=["Ｃ"],this.pitchNumberMap[-1]=["④"],this.pitchNumberMap[0]=["５","Ｄ","４"],this.pitchNumberMap[.5]=["ｅ","ｄ"],this.pitchNumberMap[1]=["⑤"],this.pitchNumberMap[1.5]=["Ｅ"],this.pitchNumberMap[2]=["６"],this.pitchNumberMap[3]=["⑥","ｆ"],this.pitchNumberMap[3.5]=["Ｆ"],this.pitchNumberMap[4]=["７"],this.pitchNumberMap[4.5]=["ｇ"],this.pitchNumberMap[5]=["⑦"],this.pitchNumberMap[5.5]=["Ｇ"],this.pitchNumberMap[6]=["⑧"],this.pitchNumberMap[7]=["９","Ｈ","８"],this.pitchNumberMap[7.5]=["ｉ","ｈ"],this.pitchNumberMap[8]=["⑨"],this.pitchNumberMap[8.5]=["Ｉ"],this.pitchNumberMap[9]=["10"],this.pitchNumberMap[10]=["⑩","ｊ"],this.pitchNumberMap[10.5]=["Ｊ"],this.pitchNumberMap[11]=["11"],this.pitchNumberMap[11.5]=["ｋ"],this.pitchNumberMap[12]=["⑪"],this.pitchNumberMap[12.5]=["Ｋ"],this.pitchNumberMap[13]=["⑫"],this.pitchNumberMap[14]=["12","Ｌ"],this.pitchNumberMap[14.5]=["ｌ"],this.latestBarOn=!1}},{key:"transform",value:function(t,e){var r=this;this.offsetPitch12=e,t.lines.forEach((function(t){return r.processLine(t)}))}},{key:"processLine",value:function(t){var e=this;if(t.staff&&t.staff[0]){var r=this.makeAccidentalByKeyMap(t);t.staff.forEach((function(t){var i=t.voices[0],n={};i.forEach((function(t){if(t.type)-1!==t.type.indexOf("bar")&&(n={});else{if(!t.pitches||t.pitches[0].endTie)return;var i=t.pitches[0].pitch,a=(i+70)%7,c=t.pitches[0].accidental;if(c){var u=0;"sharp"===c?(u=.5,2!==a&&6!==a||(u=1)):"dblsharp"===c?u=1:"flat"===c?(u=-.5,0!==a&&3!==a||(u=-1)):"dblflat"===c?u=1:"natural"===c&&(u=0),n[i]=u,i+=u}else n.hasOwnProperty(i)?i+=n[i]:r[a]&&(i+=r[a]);var s="",o=e.calcPitch(i,e.offsetPitch12);if(e.pitchNumberMap[o]){var p=i%1!==0,h=0;e.latestBarOn&&e.pitchNumberMap[o].length>1&&!p&&(h=1),s=e.pitchNumberMap[o][h],t.chord=[{name:s,position:"below"}],e.latestBarOn=1==h||p}}}))}))}}},{key:"calcPitch",value:function(t,e){var r=Math.floor((700+t)/7)-100,i=t-7*r,n=12*r+Math.round(1.8*i)+e,a=Math.floor((1200+n)/12)-100,c=n-12*a,u=7*a+Math.round(c/.9)/2;return u}},{key:"makeAccidentalByKeyMap",value:function(t){var e=t.staff[0].key.accidentals,r={};return e.forEach((function(t){var e=t.verticalPos%7,i=0;"sharp"===t.acc?(i=.5,2!==e&&6!==e||(i=1)):"flat"===t.acc&&(i=-.5,0!==e&&3!==e||(i=-1)),r[e]=i})),r}},{key:"addUnderline",value:function(t){for(var e={"ａ":"１","ｂ":"２","ｃ":"３","ｄ":"４","ｅ":"５","ｆ":"６","ｇ":"７","ｈ":"８","ｉ":"９","ｊ":"10","ｋ":"11","ｌ":"12","Ａ":"①","Ｂ":"②","Ｃ":"③","Ｄ":"④","Ｅ":"⑤","Ｆ":"⑥","Ｇ":"⑦","Ｈ":"⑧","Ｉ":"⑨","Ｊ":"⑩","Ｋ":"⑪","Ｌ":"⑫"},r=0;r<t.getElementsByTagName("text").length;r++){var i=t.getElementsByTagName("text")[r],n=i.getElementsByTagName("tspan")[0],a=n.innerHTML;if(i.setAttribute("x",i.getAttribute("x")-3),n.setAttribute("x",n.getAttribute("x")-3),e[a]){a=e[a],i.innerHTML=a;var c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1",i.getAttribute("x")),c.setAttribute("x2",String(Number(i.getAttribute("x"))+16)),c.setAttribute("y1",String(Number(i.getAttribute("y"))+4)),c.setAttribute("y2",String(Number(i.getAttribute("y"))+4)),c.setAttribute("stroke","black"),c.setAttribute("stroke-width","2"),i.parentNode.insertBefore(c,i.nextSibling)}}}}]),t}(),h="\nT:Greensleeves\nM:6/8\nL:1/8\nK:G\nA | c2 d e>fe | d2 B G>AB | c2 A A>^GA |\nB2 ^G E2 A | c2 d e>fe | d2 B G>AB |\nc>BA ^G>FG | A3 A3 || g3 g>fe | d2 B G>AB |\nc2 A A>^GA | B2 ^G E3 | g3 g>fe | d2 B G>AB |\nc>BA ^G>FG | A3 A2 |]\n",f={data:function(){return{defaultAbcText:h,offsetPitch:-12,scoreMaker:null}},mounted:function(){this.abcHarmonicaScoreMaker=new p,this.transformAbc()},methods:{transformAbc:function(){var t={responsive:"resize",afterParsing:this.addHarmonicaTab,format:{annotationfont:"Times New Roman"},oneSvgPerLine:!0};u.a.renderAbc("abc",this.$refs.abcInput.value,t)[0],this.abcHarmonicaScoreMaker.addUnderline(this.$refs.abcObj)},addHarmonicaTab:function(t){this.abcHarmonicaScoreMaker.transform(t,Number(this.offsetPitch))}}},b=f,l=(r("3d72"),r("2877")),m=Object(l["a"])(b,n,a,!1,null,"72639164",null),d=m.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(d)}}).$mount("#app")},"5fb7":function(t,e,r){}});
//# sourceMappingURL=app.13665157.js.map