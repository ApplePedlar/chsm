(function(t){function e(e){for(var r,c,s=e[0],o=e[1],u=e[2],h=0,f=[];h<s.length;h++)c=s[h],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);p&&p(e);while(f.length)f.shift()();return n.push.apply(n,u||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],r=!0,s=1;s<i.length;s++){var o=i[s];0!==a[o]&&(r=!1)}r&&(n.splice(e--,1),t=c(c.s=i[0]))}return t}var r={},a={app:0},n=[];function c(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=t,c.c=r,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(i,r,function(e){return t[e]}.bind(null,r));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var p=o;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var r=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",[t._v("CHSM - Chromatic Harmonica Score Maker")]),i("div",{staticClass:"container"},[i("div",{staticClass:"left"},[i("div",{staticClass:"form"},[t._v("Input "),i("a",{attrs:{href:"https://en.wikipedia.org/wiki/ABC_notation",target:"_blank"}},[t._v("ABC Notation")]),t._v(" Score."),i("br"),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tune,expression:"tune"}],attrs:{id:"abc-source"},domProps:{value:t.tune},on:{input:[function(e){e.target.composing||(t.tune=e.target.value)},t.transformAbc]}}),i("br"),t._v("Offset pitch:"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.offsetPitch,expression:"offsetPitch"}],attrs:{type:"number"},domProps:{value:t.offsetPitch},on:{input:[function(e){e.target.composing||(t.offsetPitch=e.target.value)},t.transformAbc],change:t.transformAbc}}),t._v("e.g. -12 means one octave down."),i("br"),i("button",{attrs:{onclick:"window.print()"}},[t._v("print")])])]),i("div",{staticClass:"right"},[i("div",{attrs:{id:"midi"}}),i("div",{ref:"abcObj",attrs:{id:"abc"}})])])])},n=[],c=(i("c5f6"),i("ac6a"),i("1f54"),i("adab"),i("5a1b")),s=i.n(c),o=i("d225"),u=i("b0b4"),p=function(){function t(){Object(o["a"])(this,t),this.init()}return Object(u["a"])(t,[{key:"init",value:function(){this.pitchNumberMap={},this.pitchNumberMap[-7]=["１"],this.pitchNumberMap[-6.5]=["ａ"],this.pitchNumberMap[-6]=["①"],this.pitchNumberMap[-5.5]=["Ａ"],this.pitchNumberMap[-5]=["２"],this.pitchNumberMap[-4]=["②","ｂ"],this.pitchNumberMap[-3.5]=["Ｂ"],this.pitchNumberMap[-3]=["３"],this.pitchNumberMap[-2.5]=["ｃ"],this.pitchNumberMap[-2]=["③"],this.pitchNumberMap[-1.5]=["Ｃ"],this.pitchNumberMap[-1]=["④"],this.pitchNumberMap[0]=["５","Ｄ","４"],this.pitchNumberMap[.5]=["ｅ","ｄ"],this.pitchNumberMap[1]=["⑤"],this.pitchNumberMap[1.5]=["Ｅ"],this.pitchNumberMap[2]=["６"],this.pitchNumberMap[3]=["⑥","ｆ"],this.pitchNumberMap[3.5]=["Ｆ"],this.pitchNumberMap[4]=["７"],this.pitchNumberMap[4.5]=["ｇ"],this.pitchNumberMap[5]=["⑦"],this.pitchNumberMap[5.5]=["Ｇ"],this.pitchNumberMap[6]=["⑧"],this.pitchNumberMap[7]=["９","Ｈ","８"],this.pitchNumberMap[7.5]=["ｉ","ｈ"],this.pitchNumberMap[8]=["⑨"],this.pitchNumberMap[8.5]=["Ｉ"],this.pitchNumberMap[9]=["10"],this.pitchNumberMap[10]=["⑩","ｊ"],this.pitchNumberMap[10.5]=["Ｊ"],this.pitchNumberMap[11]=["11"],this.pitchNumberMap[11.5]=["ｋ"],this.pitchNumberMap[12]=["⑪"],this.pitchNumberMap[12.5]=["Ｋ"],this.pitchNumberMap[13]=["⑫"],this.pitchNumberMap[14]=["12","Ｌ"],this.pitchNumberMap[14.5]=["ｌ"],this.latestBarOn=!1}},{key:"transform",value:function(t,e){var i=this;this.offsetPitch12=e,t.lines.forEach((function(t){return i.processLine(t)}))}},{key:"processLine",value:function(t){var e=this;if(t.staff&&t.staff[0]){var i=this.makeAccidentalByKeyMap(t);t.staff.forEach((function(t){var r=t.voices[0],a={};r.forEach((function(t){if(t.type)-1!==t.type.indexOf("bar")&&(a={});else{if(!t.pitches||t.pitches[0].endTie)return;var r=t.pitches[0].pitch,n=(r+70)%7,c=t.pitches[0].accidental;if(c){var s=0;"sharp"===c?(s=.5,2!==n&&6!==n||(s=1)):"dblsharp"===c?s=1:"flat"===c?(s=-.5,0!==n&&3!==n||(s=-1)):"dblflat"===c?s=1:"natural"===c&&(s=0),a[r]=s,r+=s}else a.hasOwnProperty(r)?r+=a[r]:i[n]&&(r+=i[n]);var o="",u=e.calcPitch(r,e.offsetPitch12);if(e.pitchNumberMap[u]){var p=r%1!==0,h=0;e.latestBarOn&&e.pitchNumberMap[u].length>1&&!p&&(h=1),o=e.pitchNumberMap[u][h],t.chord=[{name:o,position:"below"}],e.latestBarOn=1==h||p}}}))}))}}},{key:"calcPitch",value:function(t,e){var i=Math.floor((700+t)/7)-100,r=t-7*i,a=12*i+Math.round(1.8*r)+e,n=Math.floor((1200+a)/12)-100,c=a-12*n,s=7*n+Math.round(c/.9)/2;return s}},{key:"makeAccidentalByKeyMap",value:function(t){var e=t.staff[0].key.accidentals,i={};return e.forEach((function(t){var e=t.verticalPos%7,r=0;"sharp"===t.acc?(r=.5,2!==e&&6!==e||(r=1)):"flat"===t.acc&&(r=-.5,0!==e&&3!==e||(r=-1)),i[e]=r})),i}},{key:"addUnderline",value:function(t){for(var e={"ａ":"１","ｂ":"２","ｃ":"３","ｄ":"４","ｅ":"５","ｆ":"６","ｇ":"７","ｈ":"８","ｉ":"９","ｊ":"10","ｋ":"11","ｌ":"12","Ａ":"①","Ｂ":"②","Ｃ":"③","Ｄ":"④","Ｅ":"⑤","Ｆ":"⑥","Ｇ":"⑦","Ｈ":"⑧","Ｉ":"⑨","Ｊ":"⑩","Ｋ":"⑪","Ｌ":"⑫"},i=0;i<t.getElementsByTagName("text").length;i++){var r=t.getElementsByTagName("text")[i],a=r.getElementsByTagName("tspan")[0],n=a.innerHTML;if(r.setAttribute("x",r.getAttribute("x")-3),a.setAttribute("x",a.getAttribute("x")-3),e[n]){n=e[n],r.innerHTML=n;var c=document.createElementNS("http://www.w3.org/2000/svg","line");c.setAttribute("x1",r.getAttribute("x")),c.setAttribute("x2",String(Number(r.getAttribute("x"))+16)),c.setAttribute("y1",String(Number(r.getAttribute("y"))+4)),c.setAttribute("y2",String(Number(r.getAttribute("y"))+4)),c.setAttribute("stroke","black"),c.setAttribute("stroke-width","2"),r.parentNode.insertBefore(c,r.nextSibling)}}}}]),t}(),h="T:Greensleeves\nM:C\nL:1/8\nQ:90\nK:G\nA | c2 d e>fe | d2 B G>AB | c2 A A>^GA |\nB2 ^G E2 A | c2 d e>fe | d2 B G>AB |\nc>BA ^G>FG | A3 A3 || g3 g>fe | d2 B G>AB |\nc2 A A>^GA | B2 ^G E3 | g3 g>fe | d2 B G>AB |\nc>BA ^G>FG | A3 A2 |]\n",f={mounted:function(){this.abcHarmonicaScoreMaker=new p,this.transformAbc()},data:function(){return{tune:h,offsetPitch:-12}},methods:{transformAbc:function(){new s.a.Editor("abc-source",{canvas_id:"abc",generate_midi:!0,midi_id:"midi",abcjsParams:{animate:{listener:this.animate},afterParsing:this.addHarmonicaTab,oneSvgPerLine:!0}}),this.abcHarmonicaScoreMaker.addUnderline(this.$refs.abcObj)},colorRange:function(t,e){t&&t.elements&&t.elements.forEach((function(t){t.forEach((function(t){t.setAttribute("fill",e)}))}))},animate:function(t,e){this.colorRange(t,"#000000"),this.colorRange(e,"#3D9AFC")},addHarmonicaTab:function(t){this.abcHarmonicaScoreMaker.transform(t,Number(this.offsetPitch))}}},b=f,l=(i("7c75"),i("2877")),m=Object(l["a"])(b,a,n,!1,null,"3387fcd4",null),d=m.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(d)}}).$mount("#app")},"7c75":function(t,e,i){"use strict";i("bb54")},bb54:function(t,e,i){}});
//# sourceMappingURL=app.af02ebc5.js.map